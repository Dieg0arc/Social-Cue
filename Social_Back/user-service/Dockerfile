# Etapa de compilaci贸n
FROM golang:1.20 AS builder

WORKDIR /app

# Copia todos los archivos al contenedor de compilaci贸n
COPY . .

# Compila el binario
RUN go build -o user-server

# Etapa de ejecuci贸n
FROM alpine:latest

WORKDIR /root/

# Copia el binario compilado
COPY --from=builder /app/user-server .

# Exp贸n el puerto que uses (ajusta si es distinto)
EXPOSE 8080

# Ejecuta el binario al iniciar el contenedor
CMD ["./user-server"]
